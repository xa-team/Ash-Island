<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="newstyle.css">
    <link rel="stylesheet" href="table.css">
    <link rel="stylesheet" href="buttonstyle.css">
    <link rel="stylesheet" href="bg.css">
    <link rel="stylesheet" href="sidebar.css">
    <link rel="stylesheet" href="musicplaybar.css">
    <link rel="stylesheet" href="input.css">
    <script src="index.js"></script>
</head>

<body>
    <div class="main_box">
        <video muted autoplay loop id="profile_bg" class="animated profile_background fadeIn">
            <source src="resource/video/background.mp4" type="video/mp4">
            <strong>Your browser does not support the video tag</strong>
        </video>
        <img src="resource/pictures/ASH.jpg" alt="정규앨범 커버" class="animated album_main_ASH fadeIn" id="album_main">
        <img src="resource/pictures/How R U.jpg" alt="싱글앨범 how r u 커버" class="animated album_single HRU fadeIn" id="album_single_1">
        <img src="resource/pictures/T.T.C.jpg" alt="참여곡 T.T.C 커버" class="animated album_single TTC fadeIn" id="others">
        <img src="resource/pictures/DEADSTAR.jpg" alt="싱글앨범 DEADSTAR 커버" class="animated album_single HRU fadeIn" id="album_single_2">
        <img src="resource/pictures/MORE ASH.jpg" alt="싱글앨범 MORE ASH 커버" class="animated album_single HRU fadeIn" id="album_single_3">
        <img src="resource/pictures/Paranoid Remix.jpg" alt="싱글앨범 paranoid Remix 커버" class="animated album_single HRU fadeIn" id="album_single_4">
        <img src="resource/pictures/Empty Head.jpg" alt="싱글앨범 Empty head 커버" class="animated album_single HRU fadeIn" id="album_single_5">
        <img src="resource/pictures/Error.jpg" alt="싱글앨범 Error 커버" class="animated album_single HRU fadeIn" id="album_single_6">


        <div class="header container">
            <div class="text_home btn-home">
                <button href="#" onclick="window.location.reload();"
                        class="header" id="hd-btn">ASH</button>
            </div>
            <div class="btn-group list_btn">
                <a href="" onclick="ChangePage('profile_table'); free(); return false;"
                    style="text-decoration:none; color: #22fcba;">
                    <div class="btn active">프로필</div>
                </a>
                <a href="" onclick="free(); ChangePage('album_main'); ChangeFont('ASH', 1);ChangeMusic('Paranoid');ChangeLyrics('Paranoid'); page_Reload(); return false;" 
                    style="text-decoration:none; color: #22fcba;">
                    <div class="btn">정규 앨범</div>
                </a>
                <a href="" onclick="free(); ChangePage('album_single_1');ChangeMusic('Paranoid');ChangeLyrics('Paranoid'); page_Reload();  return false;"
                    style="text-decoration:none; color: #22fcba;">
                    <div class="btn">싱글 앨범</div>
                </a>
                <a href="" onclick="ChangePage('others'); isStop = true; return false;"
                    style="text-decoration:none; color: #22fcba;">
                    <div class="btn">참여한 곡</div>
                </a>
            </div>
            <img src="resource/pictures/ambition.png" alt="앰비션 뮤직" style="height: 40px; position:absolute; left: 80%; z-index: 11;">
            <br>
            <br>
            <div class="play_music animated fadeIn" id="play_music_btn">
                <button class="btn_Play" onclick="init(); isStop = false; music_range.max = audio.duration; alert(music_range.max);">Play</button>
                <button class="btn_Play" onclick="free()">Pause</button><br>
                <input type="range" onchange="audio.currentTime = this.value; this.max = audio.duration" step="1" min="0" value="0" id="music_range">
                <input type="range" onchange="audio.volume = this.value" min="0" max="1" step="0.001" id="music_volume" style="width: 10%;">
                <span id="music_currentTime" style="color: white; margin-left: 50%;">0:00</span>
                <span id="input_volume_size" style="color: white; margin-left: 6.5%;"></span>
            </div>
        </div>
        <!-- onchange="audio.currentTime = this.value"  onchange="audio.volume = this.value" -->

        <div class="table-div "> <!--프로필-->
            <table class="profile  animated fadeIn" id="profile_table">
                <thead>
                    <th colspan="2" style=" padding: 0px;"><img src="resource/pictures/profile.jpg" width="100%"></th>
                    <tr>
                        <td colspan="2">
                            <h2>ASH ISLAND</h2>
                        </td>
                    </tr>
                </thead>
                <tr>
                    <th>이름</th>
                    <td><strong>윤진영</strong></td>
                </tr>
                <tr>
                    <th>출생</th>
                    <td>
                        <p>1999년 8월 11일 (21세)<br>부산광역시</p>
                    </td>
                </tr>
                <tr>
                    <th>신체</th>
                    <td>
                        <p>176cm B형</p>
                    </td>
                </tr>
                <tr>
                    <th>학력</th>
                    <td>
                        <p>부산용인고등학교 졸업</p>
                    </td>
                </tr>
                <tr>
                    <th>소속 레이블</th>
                    <td><strong>AMBITION MUSIK</strong></td>
                </tr>
                <tr>
                    <th>소속 크루</th>
                    <td><strong>PABLO MU2IK, Wayside Town</strong></td>
                </tr>
                <tr>
                    <th>SNS</th>
                    <td>
                        <a href="https://www.facebook.com/clloudouble9" target="_blank"><img
                                src="resource/pictures/facebook.png" width="30" height="30"></a>
                        <a href="https://www.instagram.com/ash.island/" target="_blank"><img
                                src="resource/pictures/instagram.jpg" width="30" height="30"></a>
                        <a href="https://soundcloud.com/ashisland" target="_blank"><img
                                src="resource/pictures/soundcloud.jpg" width="30" height="30"></a>
                    </td>
                </tr>
            </table>
        </div>

        <div class="table_lyrics" id="table_lyrics">
            <table class="lyrics animated fadeIn" id="lyrics_paranoid">
            </table>
        </div>
    </div>


    <aside>
        
        <div class="album_main_sidebar animated fadeIn" id="ams">
            <!-- <button class="btn_back" id="back"><-</button> -->
            <button class="btn_content btn_clicked" id="ASH_1" onclick="ChangeFont('ASH', 1); free(); ChangeMusic('Paranoid');">Paranoid</button>
            <button class="btn_content" id="ASH_2" onclick="ChangeFont('ASH' , 2); free(); ChangeMusic('Valhalla');">발할라</button>
            <button class="btn_content" id="ASH_3" onclick="ChangeFont('ASH' , 3); free(); ChangeMusic('DEADSTAR');">DEADSTAR</button>
            <button class="btn_content" id="ASH_4" onclick="ChangeFont('ASH', 4); free(); ChangeMusic('Forgot U');">Forgot U</button>
            <button class="btn_content" id="ASH_5" onclick="ChangeFont('ASH', 5); free(); ChangeMusic('Jamsuham');">잠수함</button>
            <button class="btn_content" id="ASH_6" onclick="ChangeFont('ASH', 6); free(); ChangeMusic('Q_Mark');">Q Mark</button>
            <button class="btn_content" id="ASH_7" onclick="ChangeFont('ASH', 7); free(); ChangeMusic('Fall');">Fall</button>
        </div>
        <div class="album_single_sidebar animated fadeIn" id="ass">
            <button class="btn_content btn_clicked bg_clicked" id="SINGLE_1" onclick="ChangeBg(1); ChangeFont('SINGLE', 1); free(); ChangeMusic('How R U')">HOW R U</button>
            <button class="btn_content" id="SINGLE_2" onclick="ChangeBg(2); ChangeFont('SINGLE', 2); free(); ChangeMusic('DEADSTAR')">DEADSTAR</button>
            <button class="btn_content" id="SINGLE_3" onclick="ChangeBg(3); ChangeFont('SINGLE', 3); free();">MORE ASH</button>
            <button class="btn_content" id="SINGLE_4" onclick="ChangeBg(4); ChangeFont('SINGLE', 4); free(); ChangeMusic('Paranoid Remix')">Paranoid Remix</button>
            <button class="btn_content" id="SINGLE_5" onclick="ChangeBg(5); ChangeFont('SINGLE', 5); free(); ChangeMusic('Empty Head')">Empty Head</button>
            <button class="btn_content" id="SINGLE_6" onclick="ChangeBg(6); ChangeFont('SINGLE', 6); free(); ChangeMusic('Error')">Error</button>
        </div>
    </aside>


    <script>
        const pathLength = 68 * 2 + 200;

        class BtnGroup {
            constructor(group) {
                this.group = group;
                this.buttons = Array.prototype.slice.call(
                this.group.querySelectorAll('.btn'));

                this.svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
                this.svg.setAttribute('viewbox',`-1 -1 ${160 * this.buttons.length + 2} 42`);

                this.path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                this.currentPath = 'M -80, 40';
                this.currentIndex = -1;
                this.activateIndex(
                this.buttons.indexOf(
                this.group.querySelector('.active')));


                this.group.appendChild(this.svg);
                this.svg.appendChild(this.path);
                this.refreshPath();
                for (const button of this.buttons) {
                    button.addEventListener('click', e => this.onClick(e));
                }
            }

            onClick(e) {
                const index = this.buttons.indexOf(e.srcElement || e.target);
                this.activateIndex(index);
            }

            refreshPath() {
                this.path.setAttributeNS(null, 'd', this.currentPath);
                this.path.style.strokeDashoffset = (-this.path.getTotalLength() + pathLength) * 0.9965;
            }

            center(index) {
                return index * 160 + 80;
            }

            removeClass(str) {
                if (this.buttons[this.currentIndex]) {
                    this.buttons[this.currentIndex].classList.remove(str);
                }
            }

            addClass(str) {
                if (this.buttons[this.currentIndex]) {
                    this.buttons[this.currentIndex].classList.add(str);
                }
            }

            activateIndex(index) {
                const lastCenter = this.center(this.currentIndex);
                const nextCenter = this.center(index);
                const offset = index < this.currentIndex ? -50 : 50;
                const curve = index < this.currentIndex ? -30 : 30;
                this.currentPath += `
          L ${lastCenter + offset}, 40
          C ${lastCenter + offset + curve}, 40
            ${lastCenter + offset + curve},  0
            ${lastCenter + offset},  0
          L ${lastCenter - offset},  0
          C ${lastCenter - offset - curve},  0
            ${lastCenter - offset - curve}, 40
            ${lastCenter - offset}, 40
          L ${nextCenter + offset}, 40
          C ${nextCenter + offset + curve}, 40
            ${nextCenter + offset + curve},  0
            ${nextCenter + offset},  0
          L ${nextCenter - offset},  0
          C ${nextCenter - offset - curve},  0
            ${nextCenter - offset - curve}, 40
            ${nextCenter - offset}, 40
          L ${nextCenter}, 40
        `;
                this.removeClass('active');
                this.currentIndex = index;
                this.addClass('active');
                this.refreshPath();
            }
        }
        ;

        const groups = Array.prototype.slice.call(document.querySelectorAll('.btn-group'));
        for (const group of groups) {
            console.log(new BtnGroup(group));
        }
    </script>
</body>

</html>